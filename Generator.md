# Installation

## Add the NuGet Package to your project

All you need to do, to install Agoda.Ioc.Generator is to add a NuGet reference pointing to the package Agoda.Ioc.Generator.

## PackageReference

``` xml
<PackageReference Include="Agoda.Ioc.Generator" Version="1.1.128"  PrivateAssets="all" />
```

## .NET CLI

``` powershell
dotnet add package Agoda.Ioc.Generator --version 1.1.128
```

**Note:** Please open `*.csproj` and add PrivateAssets="all" on PackageReference Include="Agoda.Ioc.Generator" Version="1.1.128" /> if you are using the .NET CLI
If you project in not asp.net project please do install `Microsoft.Extensions.DependencyInjection.Abstractions`

## Usage in your project

The basic usage of this project allows you to use 3 core attributes on your classes (RegisterTransient, RegisterScoped, RegisterSingleton) like the following code:

```csharp
    // Project namespace is Agoda.Example
    public interface IService {}
    [RegisterSingleton] 
    public class Service : IService {}
```

In above example the generator will emit below code

```csharp
services.AddSingleton<IService, Service>();
```

When your project is being built, the library will scan your source code during compilation and emit an extension method with the name `RegisterFromYour<assembly name without the dot>`, in this case `RegisterFromAgodaExample`.Project analyzers contain the complete source code.

![analyzers](./images/analyzer.png)

```csharp
// <auto-generated>
//     Automatically generated by Agoda.IoC.Generator.
//     Changes made to this file may be lost and may cause undesirable behavior.
// </auto-generated>
using Microsoft.Extensions.DependencyInjection.Extensions;
using Agoda.Example;

namespace Microsoft.Extensions.DependencyInjection
{
    public static class AgodaIoCGeneratorInjectServiceCollectionExtension
    {
        public static IServiceCollection RegisterFromAgodaExample(this IServiceCollection serviceCollection)
        {
            return Register(serviceCollection);
        }

        internal static IServiceCollection Register(this IServiceCollection serviceCollection)
        {
			serviceCollection.AddSingleton<IService, Service>();

            return serviceCollection;
        }
    }
}
```


